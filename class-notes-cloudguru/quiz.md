**Issues with connecting to an S3 bucket from an EC2 instance residing inside a VPC, using a gateway VPC endpoint**
- Check route table settings to Amazon S3
    - Be sure there's a route to Amazon S3 using the gateway VPC endpoint.
- Security group outbound rules of EC2 instance
    - be sure the available outbound rules allow traffic to Amazon S3
- Network ACL rules of EC2 instance
    - be sure the rules allow inbound return traffic from Amazon S3 on ephemeral TCP ports 1024-65535.
    - be sure the rules allow traffic to Amazon S3.
- S3 bucket policy
    - Be sure the bucket policy allows access from the gateway VPC endpoint
- IAM policy
    - Be sure the users associated with the IAM user or role have the correct permissions to access Amazon S3

**Logs**
- VPC Flow Logs:
    - VPC Flow Logs captures IP traffic going to and from network interfaces in your VPC. Flow log data is stored using Amazon CloudWatch Logs.
    - You can create a flow log for a VPC, a subnet, or a network interface.
- CloudTrails
    - To track your changes.
    - Enables governance, compliance, operation auditing, and risk auditing.
    - CloudTrail provides:
        - Event history of your AWS account activity; This helps Security analysis, resource change tracking
        - Logs
- CloudWatch
    - Monitor performance of aws resources
    - Store logs including CloudTrail logs.


**Tagging**
- Tags help you manage your instances, images, and other Amazon EC2 resources.
- Tags enable you to categorize your AWS resources in different ways, for example, by purpose, owner, or environment.
- EG: You can add tags to production instances and development instances. These tags can then be used while controlling access via an IAM Policy.


**Encryption** with AWS KMS:
- RDS:
    - You can encrypt your Amazon RDS DB instances and snapshots at rest by enabling the encryption option for your Amazon RDS DB instances. Data that is encrypted at rest includes the underlying storage for a DB instances, its automated backups, Read Replicas, and snapshots.
- EBS:
    - EBS Volumes can be encrypted.
    - Snapshot can be encrypted while creating a copy of an unencrypted snapshot of an unencrypted EBS volume. Volumes restored from this encrypted copy are also encrypted.
    - A Snapshot from an encrypted volume is already encrypted.
    * There is no direct way to encrypt an existing unencrypted volume, or to remove encryption from an encrypted volume.
    - When you have access to both an encrypted and unencrypted volume, you can freely transfer data between them. EC2 carries out the encryption and decryption operations transparently.
- EFS:
    - Amazon EFS Now Supports Encryption of Data at Rest.
- S3:
    - Data protection refers to protecting data while in-transit (as it travels to and from Amazon S3) and at rest (while it is stored on disks in Amazon S3 data centers). You can protect data in transit by using SSL or by using client-side encryption. You have the following options of protecting data at rest in Amazon S3.


**Elastic Beanstalk**
- With Elastic Beanstalk, you can quickly deploy and manage applications in the AWS Cloud.
- You simply upload your application, and Elastic Beanstalk automatically handles the details of capacity provisioning, load balancing, scaling, and application health monitoring.
- Elastic Beanstalk supports the deployment of web applications from Docker containers.


**Amazon Kinesis**
- Amazon Kinesis makes it easy to collect, process, and analyze video and data streams in real time.
    - Kinesis Video Streams
    - Kinesis Data Streams
    - Kinesis Data Firehose
    - Kinesis Data Analytics


**Lambda**
- AWS Lambda automatically monitors your lambda function and logs all requests handled by your function and stores logs generated by your code to CloudWatch log.


**AWS managed Database server's availability**
- Enable Read Replicas for the database.
- Enable Multi-AZ for the database.
**Self managed Database server's availability**
- Introduce another EC2 instance in another AZ with replication configured. Thus availability will be achieved.


**S3 PUT/PUTS/DELETE request rate**
- Amazon S3 automatically scales to high request rates. For example, your application can achieve at least 3,500 PUT/POST/DELETE and 5,500 GET requests _per second per prefix_ in a bucket. There are no limits to the number of prefixes in a bucket.


**EBS Volume Types**
- General purpose *SSD* (GP2)
    - IOPS:         _up to 10,000_
    - Volume size:  _1GB - 16TB_
    - Throughput:   _160 MiB/s_ (Volumes 170 GiB to 214 GiB: 160; Other volumes 128)
    - Recommended for most workloads
    - System boot volumes
- Provisioned IOPS *SSD* (IO1)
    - IOPS:         _up to 32,000_
    - Volume size:  _4GB - 16TB_
    - Throughput:   _500 MiB/s_
    - Recommended for large database workloads
- Throughput Optimized HDD (ST1)
    - IOPS:         _up to 500_
    - Volume size:  _500GB - 16TB_
    - Throughput:   _500 MiB/s_
    - Big data | Data warehouse | Log processing
    - Can't be boot volume. _It can only be used as additional drives_.
- Cold HDD (SC1)
    - IOPS:         _up to 250_
    - Volume size:  _500GB - 16TB_
    - Throughput:   _250 MiB/s_
    - Lowest cost storage, appropriate for infrequent accessed workloads.
    - Can't be boot volume. _It can only be used as additional drives_.
- Magnetic (Standard)
    - Lowest cost per giga of all EBS volume types that bootable.


**Well Architected Framework**
- Design Principle:
    - Apply security at all layers. Subnets, ACL, On instances (firewall, antivirus)
    - Enable traceability
    - Automate responses to security events
    - You are responsible to secure your Data, your Application and the OS
- Shared responsibility model (IMPORTANT):
    - Customers responsibility:
        - Platform (OS)
        - Application
        - IAM
        - SG
        - NACL
    - Amazon's responsibility:
        - Security of the cloud (Physical infrastructure)
        - Applications offered by them: MS SQL SERVER, ...

**Security**
- *Security - Data Protection*
    - Who should have access to your data.
- *Security - Privilege Management*
    - Role based access management.
    - Multi factor access management.
    - Groups or users (HR, Admins, ...)
- *Security - Infrastructure Protection*
    - VPC protection (public/private subnets, service group, nacl rules), multi-factor authentication, ...
- *Security - Detective Controls*

**Reliability**
- Design Principle:
    - Test recovery procedures
    - Automatically recover from failure
    - Scale horizontally to increase aggregate system availability
    - Stop guessing capacity
- *Reliability - .*
